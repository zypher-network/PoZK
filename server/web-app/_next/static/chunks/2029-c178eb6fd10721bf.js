"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2029],{90618:function(e,t,n){var o,a,r=n(4410);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(null,arguments)}t.Z=function(e){return r.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",width:72,height:72,fill:"none",viewBox:"0 0 72 72"},e),r.createElement("mask",{id:"a",width:72,height:72,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},o||(o=r.createElement("rect",{width:72,height:72,fill:"#D9D9D9",rx:4}))),a||(a=r.createElement("g",{mask:"url(#a)"},r.createElement("path",{fill:"#FACC16",stroke:"#1E1D23",strokeWidth:2,d:"M59.961 60H12.039c-3.964 0-6.352-4.393-4.196-7.72l23.961-36.968c1.971-3.04 6.42-3.04 8.392 0l23.96 36.969c2.157 3.326-.23 7.719-4.195 7.719Z"}),r.createElement("rect",{width:4,height:20,x:34,y:28,fill:"#1E1D23",rx:2}),r.createElement("rect",{width:4,height:4,x:34,y:50,fill:"#1E1D23",rx:2}))))}},989:function(e,t,n){n.d(t,{RO:function(){return a},Zz:function(){return r},pI:function(){return s},wQ:function(){return l}});var o=n(99441);let a=(0,o.cn)({key:"StakeFormBtnLabel",default:"Confirm"}),r=(0,o.cn)({key:"StakeItem",default:void 0}),s=(0,o.cn)({key:"GameConfig",default:[]});(0,o.cn)({key:"StakedGameConfig",default:[]});let l=(0,o.cn)({key:"ControllerList",default:{isLoading:!0,hasOnController:!1,list:[]}})},51356:function(e,t,n){n.d(t,{p:function(){return d}});var o=n(57437),a=n(78068),r=n(2265),s=n(99441),l=n(84554),i=n(16463),c=n(63536);let d=()=>{let{toast:e}=(0,a.pm)(),t=(0,i.useRouter)(),n=(0,i.usePathname)(),d=(0,s.Zl)(l.g),{deleteToken:u}=(0,c.k)();return(0,r.useCallback)(async a=>{console.log({error:a});let{code:r,message:s}=a||{};-1===s.indexOf("HTTP error 5")&&e({variant:"destructive",title:null!=r?r:"Failed",description:(0,o.jsx)("p",{className:"text-[14px]",children:null!=s?s:"Failed"})}),"HTTP error 401"===s&&(console.log("8888888888888888888888888888888888888888888888888888888"),u(),d(n),t.push("/"))},[e])}},63536:function(e,t,n){n.d(t,{k:function(){return r}});var o=n(2265),a=n(43965);let r=()=>{let e=(0,o.useContext)(a.B);if(!e)throw Error("useSession must be used within a SessionManagerProvider");return e}},43965:function(e,t,n){n.d(t,{B:function(){return i}});var o=n(57437),a=n(40431),r=n(78960),s=n(16463),l=n(2265);let i=(0,l.createContext)(void 0);t.default=(0,l.memo)(e=>{let{children:t}=e,n=(0,s.useRouter)(),c=(0,s.usePathname)(),[d,u]=(0,l.useState)(void 0!==a.Z.getSession()),[f,p]=(0,l.useState)(a.Z.getAccount()),m=(0,l.useCallback)(()=>a.Z.getSession(),[]),h=(0,l.useCallback)(e=>{a.Z.setSession(e),u(!0)},[]),g=(0,l.useCallback)(()=>{a.Z.deleteSession(),u(!1)},[]),v=(0,l.useCallback)(async()=>{g(),u(!1),await (0,r.Z)(.2),console.log("---- logout"),"/"!==c&&n.push("/")},[c]);return(0,o.jsx)(i.Provider,{value:{account:f,setAccount:(e,t)=>{a.Z.setAccount("".concat(e).concat(t)),p("".concat(e).concat(t)),u(!0)},hasToken:d,getToken:m,setToken:h,deleteToken:g,loginOut:v},children:t})})},59313:function(e,t,n){var o=n(45129);let a=(0,n(39099).Ue)(e=>({controllers:[],active:"",fetching:!1,page:1,fetch:async t=>{e({fetching:!0});try{let n=await o.Z.getControllers(t),a=await o.Z.getActiveController();e({fetching:!1,active:a,controllers:(a?[a]:[]).concat(n.filter(e=>e!==a)).map(e=>({status:e===a?"on":"off",address:e}))})}catch(t){throw e({fetching:!1}),t}}}));t.Z=a},84554:function(e,t,n){let o;n.d(t,{g:function(){return r}});var a=n(99441);let r=(0,a.cn)({key:"FailedRoute",default:void 0,effects_UNSTABLE:[(o="FailedRoute",e=>{let{setSelf:t,onSet:n}=e,r=localStorage.getItem(o);if(null!=r)try{t(JSON.parse(r))}catch(e){console.error("localStorageEffect:---",e)}n(e=>{e instanceof a.nY||!e?localStorage.removeItem(o):localStorage.setItem(o,JSON.stringify(e))})})]})},31590:function(e,t,n){n.d(t,{$F:function(){return c},AW:function(){return d},Ju:function(){return f},VD:function(){return p},Xi:function(){return u},h_:function(){return i}});var o=n(57437),a=n(2265),r=n(81622),s=n(4867),l=n(49354);let i=r.fC,c=r.xz;r.ZA,r.Uv,r.Tr,r.Ee,a.forwardRef((e,t)=>{let{className:n,inset:a,children:i,...c}=e;return(0,o.jsxs)(r.fF,{ref:t,className:(0,l.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",a&&"pl-8",n),...c,children:[i,(0,o.jsx)(s.XCv,{className:"ml-auto h-4 w-4"})]})}).displayName=r.fF.displayName,a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,o.jsx)(r.tu,{ref:t,className:(0,l.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...a})}).displayName=r.tu.displayName;let d=a.forwardRef((e,t)=>{let{className:n,sideOffset:a=4,...s}=e;return(0,o.jsx)(r.Uv,{children:(0,o.jsx)(r.VY,{ref:t,sideOffset:a,className:(0,l.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...s})})});d.displayName=r.VY.displayName;let u=a.forwardRef((e,t)=>{let{className:n,inset:a,...s}=e;return(0,o.jsx)(r.ck,{ref:t,className:(0,l.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a&&"pl-8",n),...s})});u.displayName=r.ck.displayName,a.forwardRef((e,t)=>{let{className:n,children:a,checked:i,...c}=e;return(0,o.jsxs)(r.oC,{ref:t,className:(0,l.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:i,...c,children:[(0,o.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,o.jsx)(r.wU,{children:(0,o.jsx)(s.nQG,{className:"h-4 w-4"})})}),a]})}).displayName=r.oC.displayName,a.forwardRef((e,t)=>{let{className:n,children:a,...i}=e;return(0,o.jsxs)(r.Rk,{ref:t,className:(0,l.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...i,children:[(0,o.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,o.jsx)(r.wU,{children:(0,o.jsx)(s.jXb,{className:"h-4 w-4 fill-current"})})}),a]})}).displayName=r.Rk.displayName;let f=a.forwardRef((e,t)=>{let{className:n,inset:a,...s}=e;return(0,o.jsx)(r.__,{ref:t,className:(0,l.cn)("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",n),...s})});f.displayName=r.__.displayName;let p=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,o.jsx)(r.Z0,{ref:t,className:(0,l.cn)("-mx-1 my-1 h-px bg-muted",n),...a})});p.displayName=r.Z0.displayName},78068:function(e,t,n){n.d(t,{Am:function(){return u},pm:function(){return f}});var o=n(2265);let a=0,r=new Map,s=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e3);r.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:n}=t;return n?s(n):e.toasts.forEach(e=>{s(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===n||void 0===n?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},i=[],c={toasts:[]};function d(e){c=l(c,e),i.forEach(e=>{e(c)})}function u(e){let{...t}=e,n=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),o=()=>d({type:"DISMISS_TOAST",toastId:n});return d({type:"ADD_TOAST",toast:{...t,id:n,open:!0,duration:2e3,onOpenChange:e=>{e||o()}}}),{id:n,dismiss:o,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:n}})}}function f(){let[e,t]=o.useState(c);return o.useLayoutEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},44447:function(e,t,n){n.d(t,{DJ:function(){return o},ZP:function(){return r},px:function(){return a}}),n(25566).env.metadataBase;let o="Pozk",a="Bearer",r="account-Key"},85090:function(e,t,n){var o=n(40431);async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{useUrl:n=!1,...a}=t,r={"Content-Type":"application/json"},s=o.Z.getSession();s&&(r.AUTHORIZATION="Bearer "+s);let l=await fetch("".concat(t.useUrl?"/api":window.location.origin).concat(e),{...a,headers:r});if(!l.ok)throw Error("HTTP error ".concat(l.status));return l.json()}async function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a(e,{...t,method:"GET"})}async function s(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a(e,{...n,method:"POST",body:JSON.stringify(t)})}async function l(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a(e,{...n,method:"PUT",body:JSON.stringify(t)})}async function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a(e,{...t,method:"DELETE"})}t.Z={get:r,post:s,put:l,delete:i}},40431:function(e,t,n){var o=n(44447);class a{static getSession(){if(this.isCookie){let e=o.px,t=document.cookie.split(";");for(let n=0;n<t.length;n++){let o=t[n].trim();if(o.startsWith("".concat(e,"=")))return o.substring(e.length+1)}return}let e=localStorage.getItem(o.px);return null!=e?e:void 0}static setSession(e){localStorage.setItem(o.px,e)}static deleteSession(){localStorage.removeItem(o.px)}static getAccount(){let e=localStorage.getItem(o.ZP);return null!=e?e:void 0}static setAccount(e){localStorage.setItem(o.ZP,e)}}a.isCookie=!1,t.Z=a},78960:function(e,t,n){n.d(t,{Z:function(){return o}});function o(e){let t;let n=+new Date;return new Promise((o,a)=>{t=setInterval(()=>{n+1e3*e<+new Date&&(clearInterval(t),o(!0))},10)})}},45129:function(e,t,n){var o=n(85090),a=n(46405);class r{async getProverContainers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;try{var n;let r=(0,a.stringify)({page_count:e,page_size:t}),s=await o.Z.get("".concat(this.endpoints.prover.list,"?").concat(r));return null!==(n=null==s?void 0:s.data)&&void 0!==n?n:[]}catch(e){return this.handleError(e,[])}}async newController(){try{var e;let t=await o.Z.post(this.endpoints.controller.new,{singing_key:null});return console.log(t),null!==(e=null==t?void 0:t.controller)&&void 0!==e?e:""}catch(e){return this.handleError(e,"")}}async getControllers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=(0,a.stringify)({page_count:e,page_size:t});try{var r;let e=await o.Z.get("".concat(this.endpoints.controller.list,"?").concat(n));return null!==(r=null==e?void 0:e.data)&&void 0!==r?r:[]}catch(e){return this.handleError(e,[])}}async getActiveController(){let e=(0,a.stringify)({page_count:0,page_size:0});try{var t;let n=await o.Z.get("".concat(this.endpoints.controller.list,"?").concat(e));return null!==(t=null==n?void 0:n.main)&&void 0!==t?t:""}catch(e){return this.handleError(e,"")}}async login(e){return await o.Z.post("".concat(this.endpoints.login),e)}async pullProve(e,t,n,a){try{let r={tag:"v".concat(t),name:n,prover:e,overtime:Number(a)};await o.Z.post("".concat(this.endpoints.prover.pull),r)}catch(e){this.handleError(e,"")}}handleError(e,t){let{message:n}=e;if(console.error("catch error:",n,n.includes("500")),n.includes("500"))return t;throw e}constructor(){this.endpoints={login:"/login",proverImage:"/api/provers/{id}",controller:{new:"/api/controllers",list:"/api/controllers"},prover:{list:"/api/provers",pull:"/api/provers"}}}}t.Z=new r}}]);